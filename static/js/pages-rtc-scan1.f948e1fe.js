(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-rtc-scan1"],{3014:function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.container[data-v-86a13a56]{width:100%;height:100vh}.container .camera[data-v-86a13a56]{position:absolute;top:0;width:100%;height:100%;z-index:1}.container .cover[data-v-86a13a56]{position:absolute;top:0;width:100%;height:100%;z-index:2}.container .cover .train-progress[data-v-86a13a56]{position:absolute;width:100%;z-index:10;padding:0 %?30?%;box-sizing:border-box}.container .cover .train-progress .train-progress-a[data-v-86a13a56]{border-radius:%?20?%;background-color:#fff;position:relative;padding:%?20?%;height:%?250?%;box-sizing:border-box;display:flex;justify-content:space-between;align-items:center}.container .cover .train-progress .train-progress-a .left-p .s[data-v-86a13a56]{font-size:%?40?%}.container .cover .train-progress .train-progress-a .right-p[data-v-86a13a56]{position:absolute;right:0;top:0}.container .cover .control[data-v-86a13a56]{position:absolute;bottom:%?50?%;width:100%;height:%?130?%;display:flex;justify-content:center;align-items:center}.container .cover .control .btn[data-v-86a13a56]{width:100%;height:100%;position:relative;display:flex;justify-content:center}.container .cover .control .btn .cameraBtn[data-v-86a13a56]{width:%?130?%;height:%?130?%;border:%?6?% #fff solid;border-radius:50%;padding:%?8?%;display:flex;justify-content:center;align-items:center}.container .cover .control .btn .cameraBtn2[data-v-86a13a56]{box-sizing:border-box;width:100%;height:100%;border-radius:50%;background-color:#fff}.container .cover .control .btn .xz[data-v-86a13a56]{position:absolute;width:30%;height:100%;bottom:0;right:%?30?%;display:flex;align-items:center;justify-content:center}.container .cover .control .btn .xzImg[data-v-86a13a56]{width:%?76?%;height:auto}.container .cover .control .btn .go-index[data-v-86a13a56]{position:absolute;width:30%;height:100%;bottom:0;left:%?30?%;display:flex;align-items:center;justify-content:center}.container .cover .scan-wrap[data-v-86a13a56]{position:absolute;width:100%;height:70%;display:flex;justify-content:center;top:%?180?%}.container .cover .scan-wrap .scan[data-v-86a13a56]{position:relative;width:70%;height:100%;background:linear-gradient(270deg,#4778b5,#4778b5) 0 0 no-repeat,linear-gradient(180deg,#4778b5,#4778b5) 0 0 no-repeat,linear-gradient(270deg,#4778b5,#4778b5) 100% 0 no-repeat,linear-gradient(180deg,#4778b5,#4778b5) 100% 0 no-repeat,linear-gradient(270deg,#4778b5,#4778b5) 0 100% no-repeat,linear-gradient(180deg,#4778b5,#4778b5) 0 100% no-repeat,linear-gradient(270deg,#4778b5,#4778b5) 100% 100% no-repeat,linear-gradient(270deg,#4778b5,#4778b5) 100% 100% no-repeat;background-size:%?10?% %?40?%,%?40?% %?10?%,%?10?% %?40?%,%?40?% %?10?%}.container .cover .scan-wrap .scan .cd-tip[data-v-86a13a56]{position:absolute;top:%?30?%;left:%?30?%;width:100%}.container .cover .scan-wrap .scan .cd-tip .cd[data-v-86a13a56]{background-color:#1cbbb4;display:flex;justify-content:center;align-items:center;width:%?100?%;height:%?100?%;border-radius:50%}.container .cover .scan-wrap .scan .line[data-v-86a13a56]{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden}.container .cover .scan-wrap .scan .line[data-v-86a13a56]::before{content:"";position:absolute;top:0;left:0;width:100%;height:10%;background-image:linear-gradient(180deg,hsla(0,0%,100%,0) 0,rgba(46,255,255,.2) 50%,rgba(46,235,235,.3));-webkit-animation:scan-data-v-86a13a56 2s linear infinite;animation:scan-data-v-86a13a56 2s linear infinite}@-webkit-keyframes scan-data-v-86a13a56{0%{-webkit-transform:translateY(-10%);transform:translateY(-10%)}100%{-webkit-transform:translateY(1000%);transform:translateY(1000%)}}@keyframes scan-data-v-86a13a56{0%{-webkit-transform:translateY(-10%);transform:translateY(-10%)}100%{-webkit-transform:translateY(1000%);transform:translateY(1000%)}}.container .cover .start-before[data-v-86a13a56]{position:absolute;top:%?400?%;width:100%;display:flex;justify-content:center}.container .slot-content[data-v-86a13a56]{height:%?700?%;width:100%}.container .slot-content .fail-image-notify[data-v-86a13a56]{width:100%;height:100%;overflow-y:scroll}.container .slot-content .fail-image-notify .fail-image-notify-item[data-v-86a13a56]{position:relative}.container .slot-content .fail-image-notify .fail-image-notify-item .fail-msg[data-v-86a13a56]{position:absolute;top:%?10?%;left:%?10?%;color:red;font-size:%?35?%;z-index:20}',""]),t.exports=e},"574e":function(t,e,i){"use strict";i.r(e);var n=i("5919"),a=i.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=a.a},5919:function(t,e,i){"use strict";i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("64aa"),i("d4b5"),i("c223");var n={props:{times:{type:Number,default:function(){return 1e4}},widths:{type:Number,default:function(){return 200}},breadth:{type:Number,default:function(){return 30}},activeColor:{type:String,default:function(){return"#01B862"}},defaultColor:{type:String,default:function(){return"#EDF0F0"}},isScale:{type:Boolean,default:function(){return!1}},scaleNun:{type:Number,default:function(){return 40}},scaleAngle:{type:Number,default:function(){return 6}},is_reversal:{type:Boolean,default:function(){return!1}}},data:function(){return{stycircle1:{},stycircle2:{},animationDelay:0,timer:null,timeAll:0,pause_text:"paused",finish:!1,is_continue:!0,rotatea:"rotate(180deg)",rotateb:"rotate(-180deg)"}},beforeDestroy:function(){clearInterval(this.timer)},mounted:function(){this.timeAll=JSON.parse(JSON.stringify(this.times))},methods:{start:function(){var t=this;this.finish||(this.finish=!0,this.$nextTick((function(){if(t.times<1e3)uni.showToast({title:"时间最少1s",icon:"none",duration:1500,mask:!0});else{clearInterval(t.timer);var e=Number((t.times/2).toFixed(2));t.stycircle2="progross2 ".concat(e,"ms linear forwards"),t.animationDelay="".concat(e,"ms"),t.stycircle1="progross1 ".concat(e,"ms linear forwards"),t.pause_text="running",t.setIn()}})))},setIn:function(t){var e=this;this.timer=setInterval((function(){var i=e.times-100;e.$emit("update:times",i),t&&(e.pause_text="running"),e.times<=100&&(e.finish=!0,setTimeout((function(){e.$emit("endTime"),e.$emit("update:times",e.timeAll)}),100),clearInterval(e.timer))}),100)},pause:function(){this.finish&&(this.pause_text="paused",this.is_continue=!1,clearInterval(this.timer),this.$emit("pauseNum",this.times))},goOn:function(){this.is_continue||(this.is_continue=!0,this.setIn(!0))},reset:function(){this.stycircle2="progross 0s linear forwards",this.stycircle1="progross 0s linear forwards",this.animationDelay=0,clearInterval(this.timer),this.finish=!1,this.is_continue=!0,this.$emit("update:times",this.timeAll)}},computed:{circle:function(){var t=this.widths,e=this.defaultColor;return{width:"".concat(t,"rpx"),height:"".concat(t,"rpx"),background:e}},size:function(){var t=this.widths;return{width:"".concat(t/2+2,"rpx"),height:"".concat(t+2,"rpx")}},leftCircle:function(){var t=this.widths,e=this.activeColor;return{borderTopLeftRadius:"".concat(t,"rpx"),borderBottomLeftRadius:"".concat(t,"rpx"),background:e}},rightcircle:function(){var t=this.widths,e=this.activeColor;return{borderTopRightRadius:"".concat(t,"rpx"),borderBottomRightRadius:"".concat(t,"rpx"),background:e}},inner:function(){var t=this.widths,e=this.breadth;return{width:"".concat(t-e,"rpx"),height:"".concat(t-e,"rpx")}},scale:function(){var t=this.defaultColor,e=this.scaleNun,i=this.scaleAngle;return{background:"repeating-conic-gradient(".concat(t," 0 ").concat(i,"deg, rgba(0, 0, 0, 0) 0deg ").concat(360/e,"deg)")}}},watch:{}};e.default=n},"66ca":function(t,e,i){"use strict";var n=i("bc10"),a=i.n(n);a.a},"75a1":function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,".circle[data-v-76eb74ec]{border-radius:50%;position:relative}.circle_line[data-v-76eb74ec]{width:100%;height:100%;border-radius:50%;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);overflow:hidden}.left[data-v-76eb74ec],\n.right[data-v-76eb74ec]{position:absolute;overflow:hidden}.left-circle[data-v-76eb74ec]{transition:all .5s;-webkit-transform-origin:right center;transform-origin:right center}.right-circle[data-v-76eb74ec]{transition:all .5s;-webkit-transform-origin:left center;transform-origin:left center}@-webkit-keyframes progross1-data-v-76eb74ec{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes progross1-data-v-76eb74ec{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes progross2-data-v-76eb74ec{to{-webkit-transform:rotate(0deg);transform:rotate(0deg)}}@keyframes progross2-data-v-76eb74ec{to{-webkit-transform:rotate(0deg);transform:rotate(0deg)}}.right[data-v-76eb74ec]{right:0}.inner[data-v-76eb74ec]{background:#fff;position:absolute;z-index:999;border-radius:50%;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);border:%?2?% solid #fff;overflow:hidden;display:flex;align-items:center;justify-content:center}",""]),t.exports=e},"8c20":function(t,e,i){"use strict";i.r(e);var n=i("d9e4"),a=i("f0d9");for(var r in a)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(r);i("66ca");var o=i("828b"),s=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"86a13a56",null,!1,n["a"],void 0);e["default"]=s.exports},a5b6:function(t,e,i){var n=i("75a1");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("967d").default;a("e65aacd6",n,!0,{sourceMap:!1,shadowMode:!1})},b4a9:function(t,e,i){"use strict";i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("bf0f");var n="https://gxjk.one-health.com.cn:444/wxapp",a={baseUrl:n,httpRequest:function(t,e){uni.onNetworkStatusChange((function(t){return t.isConnected||uni.showToast({title:"网络连接不可用！",icon:"none"}),!1}));var i={url:n+t.url,data:e,method:t.method,header:"get"==t.method?{"X-Requested-With":"XMLHttpRequest",Accept:"application/json","Content-Type":"application/json; charset=UTF-8"}:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json; charset=UTF-8"},dataType:"json",timeout:1e4},a=new Promise((function(t,e){uni.request(i).then((function(e){e[0]||t(e[1].data)})).catch((function(t){e(t)}))}));return a},httpTokenRequest:function(t,e){var i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ0aGlzIGlzIGd1b3hpbiBtaW5pYXBwIHRva2VuIiwiYXVkIjoiTUlOSUFQUCIsImlzcyI6IkdVT1hJTiIsImV4cCI6MTcyNzY2NTkwOCwiaWF0IjoxNzI0OTg3NTA4LCJ1c2VyaW5mbyI6IntcImNsaWVudFwiOjEsXCJpZFwiOjMyfSJ9.3P5JhDM9p2IEd_8QrwLahUYOfHlOfHw5Ejrpn46gYkA",a={url:n+t.url,data:e,method:t.method,header:"get"==t.method?{"X-Access-Token":i,"X-Requested-With":"XMLHttpRequest",Accept:"application/json","Content-Type":"application/json; charset=UTF-8"}:{"X-Access-Token":i,"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json; charset=UTF-8"},dataType:"json",timeout:1e4},r=new Promise((function(t,e){uni.request(a).then((function(i){if(i[0])uni.reLaunch({url:"/pages/neterror"});else{if(401==i[1].data.code);else if(500==i[1].data.code)return uni.showToast({title:i[1].data.msg,icon:"none"}),e(i);t(i[1].data)}})).catch((function(t){e(t)}))}));return r},hadToken:function(){var t=uni.getStorageSync("token");return""!=t&&void 0!=t&&null!=t||(uni.showToast({title:"账号已过期，请重新登录",icon:"none",complete:function(){uni.reLaunch({url:"/pages/login/index"})}}),!1)}};e.default=a},bc10:function(t,e,i){var n=i("3014");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("967d").default;a("4baece86",n,!0,{sourceMap:!1,shadowMode:!1})},c14b:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{},[i("v-uni-view",{staticClass:"circle",style:[t.circle]},[i("v-uni-view",{staticClass:"left",style:[t.size]},[i("v-uni-view",{staticClass:"left-circle",style:[{transform:t.rotatea},{animation:t.is_reversal?t.stycircle2:t.stycircle1},{transform:t.rotatea},{"animation-delay":t.is_reversal?0:t.animationDelay},{"animation-play-state":t.pause_text},{"-webkit-animation-play-state":t.pause_text},t.size,t.leftCircle]})],1),i("v-uni-view",{staticClass:"right",style:[t.size]},[i("v-uni-view",{staticClass:"right-circle",style:[{transform:t.is_reversal?t.rotatea:t.rotateb},{animation:t.stycircle2},{"animation-delay":t.is_reversal?t.animationDelay:0},{"animation-play-state":t.pause_text},{"-webkit-animation-play-state":t.pause_text},t.size,t.rightcircle]})],1),i("v-uni-view",{staticClass:"inner",style:[t.inner]},[t._t("default")],2),t.isScale?i("v-uni-view",{staticClass:"circle_line",style:[t.scale]}):t._e()],1)],1)},a=[]},d044:function(t,e,i){"use strict";var n=i("a5b6"),a=i.n(n);a.a},d051:function(t,e,i){"use strict";i.r(e);var n=i("c14b"),a=i("574e");for(var r in a)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(r);i("d044");var o=i("828b"),s=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"76eb74ec",null,!1,n["a"],void 0);e["default"]=s.exports},d9e4:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}));var n={countDown:i("d051").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"container"},[i("v-uni-view",{staticClass:"cover"},[!t.trainBtnStatus&&t.showProgress?i("v-uni-view",{staticClass:"train-progress",style:{top:"120px"}},[i("v-uni-view",{staticClass:"train-progress-a"},[i("v-uni-view",{staticClass:"left-p"},[i("v-uni-view",{staticClass:"s"},[t._v(t._s(t.prescriptionName))]),i("v-uni-view",{staticStyle:{"margin-top":"20upx"}},[i("v-uni-radio-group",{attrs:{iconSize:"22"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.directionChange.apply(void 0,arguments)}}},[i("v-uni-label",[i("v-uni-radio",{attrs:{value:"left",checked:"left"===t.direction}}),i("v-uni-text",{staticStyle:{"font-size":"35rpx","margin-left":"15rpx"}},[t._v("左")])],1),i("v-uni-text",{staticStyle:{margin:"0 20rpx"}}),i("v-uni-label",[i("v-uni-radio",{attrs:{value:"right",checked:"right"===t.direction}}),i("v-uni-text",{staticStyle:{"font-size":"35rpx","margin-left":"15rpx"}},[t._v("右")])],1)],1)],1),i("v-uni-view",{staticClass:"x",staticStyle:{"margin-top":"20upx"}},[i("v-uni-text",{staticStyle:{color:"#1cbbb4","font-size":"35rpx"}},[t._v(t._s(t.calcTrainProgress()))]),i("v-uni-text",{staticClass:"iconfont icon-xiexian_slashxiexian_slash",staticStyle:{margin:"0 10upx"}}),i("v-uni-text",{staticStyle:{"font-size":"35upx"}},[t._v("共"+t._s(t.group)+"组，每组"+t._s(t.groupTimes)+"次")])],1)],1),t.trainTimes>=t.group*t.groupTimes?i("v-uni-view",{staticClass:"right-p"},[i("v-uni-image",{staticStyle:{width:"120upx",height:"120upx"},attrs:{src:t.baseUrl+"/profile/weapp/cpt.png",mode:"aspectFit"}})],1):t._e()],1)],1):t._e(),i("v-uni-view",{staticClass:"scan-wrap"},[t.isTrain?i("v-uni-view",{staticClass:"scan"},[i("v-uni-view",{staticClass:"line"}),i("v-uni-view",{staticClass:"cd-tip"},[i("v-uni-view",{staticClass:"cd"},[i("v-uni-text",{staticStyle:{color:"#fff","font-size":"35rpx"}},[t._v(t._s(t.second+"s"))])],1)],1)],1):t._e()],1),i("v-uni-view",{staticClass:"start-before"},[i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.showCircleProgress,expression:"showCircleProgress"}],staticClass:"start-before-countdown"},[i("countDown",{ref:"down",attrs:{widths:250,breadth:30,activeColor:"#01B862",defaultColor:"#EDF0F0",times:t.startDelay},on:{"update:times":function(e){arguments[0]=e=t.$handleEvent(e),t.startDelay=e},endTime:function(e){arguments[0]=e=t.$handleEvent(e),t.startDelayEnd.apply(void 0,arguments)}}},[i("v-uni-view",{staticStyle:{"font-size":"56upx",color:"#b4b4b4","font-weight":"bold"}},[t._v(t._s((t.startDelay/1e3).toFixed(0))+"s")])],1)],1)],1),i("v-uni-view",{staticClass:"control"},[i("v-uni-view",{staticClass:"btn"},[t.trainBtnStatus?i("v-uni-view",{staticClass:"cameraBtn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.forceStopTrain.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"iconfont icon-tingzhi",staticStyle:{color:"red"}})],1):i("v-uni-view",{staticClass:"cameraBtn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.startTrainDelay.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"cameraBtn2"})],1),i("v-uni-view",{staticClass:"go-index",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.backToIndex.apply(void 0,arguments)}}},[i("v-uni-cover-image",{staticClass:"xzImg",attrs:{src:t.baseUrl+"/profile/weapp/back-index.png"}})],1),i("v-uni-view",{staticClass:"xz",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.switchDevicePosition.apply(void 0,arguments)}}},[i("v-uni-cover-image",{staticClass:"xzImg",attrs:{src:t.baseUrl+"/profile/weapp/xz.png"}})],1)],1)],1)],1)],1)},r=[]},f0d9:function(t,e,i){"use strict";i.r(e);var n=i("f599"),a=i.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=a.a},f599:function(t,e,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("c223"),i("bf0f"),i("fd3c");var a=n(i("d051")),r=n(i("b4a9")),o={components:{countDown:a.default},data:function(){return{baseUrl:r.default.baseUrl,navBgColor:this.$navBgColor,trainTime:10,second:0,isTrain:!1,devicePosition:"back",startDelay:5e3,showCircleProgress:!1,trainBtnStatus:!1,countdownInterval:null,countdownTimeout:null,takePhotoInterval:null,prescriptionCode:"sittingLiftingLeg",prescriptionId:null,prescriptionName:"平板支撑",trainId:1,trainTimeId:2,trainTimes:0,group:3,groupTimes:1,trainProgress:"",direction:"left",trainFailList:[],ctx:null,showTrainResultModal:!1,offTop:0,showProgress:!1}},onUnload:function(){console.log("退出页面"),this.countdownInterval&&clearInterval(this.countdownInterval),this.takePhotoInterval&&clearInterval(this.takePhotoInterval),this.countdownTimeout&&clearTimeout(this.countdownTimeout),this.audioContext.destroy()},onLoad:function(t){var e=this;this.prescriptionId=1,this.prescriptionName="坐位抬腿",this.prescriptionCode="sittingLiftingLeg",this.trainTime=5,r.default.httpTokenRequest({url:"/wx/patientTrain/createTrainRecord",method:"post"},{prescriptionId:this.prescriptionId}).then((function(t){e.trainId=t.data;var i=e.selectTrainTimes();i.then((function(t){var i=e.group*e.groupTimes;e.trainTimes>=i&&t.other>=i||e.trainTimes>=i&&(e.direction="right",e.selectTrainTimes());var n=e.prescriptionName+("left"===e.direction?"，当前动作方向为左边":"，当前动作方向为右边");e.callTextToSpeech(n)}))})).catch((function(t){})),this.audioContext=uni.createInnerAudioContext()},created:function(){},onReady:function(){},mounted:function(){this.showProgress=!0},methods:{takePhoto:function(){var t=this;this.ctx.takePhoto({quality:"original",success:function(e){uni.uploadFile({url:r.default.baseUrl+"/wx/patientTrain/uploadPhoto",filePath:e.tempImagePath,name:"file",header:{"X-Access-Token":uni.getStorageSync("token")},formData:{trainTimeId:t.trainTimeId,prescriptionCode:t.prescriptionCode,direction:t.direction},success:function(t){},fail:function(t){}}),console.log(e.tempImagePath)},fail:function(t){console.log(t)}})},calcTrainProgress:function(){var t=Math.floor(this.trainTimes/this.groupTimes)+1,e=this.trainTimes%this.groupTimes+1;return"第".concat(t,"组，第").concat(e,"次")},selectTrainTimes:function(){var t=this;return new Promise((function(e,i){r.default.httpTokenRequest({url:"/wx/patientTrain/trainTimes",method:"post"},{trainId:t.trainId,direction:t.direction}).then((function(i){t.trainTimes=i.data.current,e(i.data)})).catch((function(t){i()}))}))},error:function(t){console.log(t.detail)},startTrain:function(){uni.showToast({title:"请保持人在方框内",icon:"none"}),this.isTrain=!0,this.trainBtnStatus=!0,this.countDown()},startTrainDelay:function(){var t=this;uni.showModal({title:"提示",content:"开启训练后，将在10秒后开始，请您做好准备",success:function(e){e.confirm?t.trainBtnStatus||(t.callTextToSpeech("训练即将开始，请您做好准备"),t.createTrainTimeRecord()):e.cancel}})},createTrainTimeRecord:function(){var t=this;uni.showLoading({title:"启动中"}),r.default.httpTokenRequest({url:"/wx/patientTrain/createTrainTimeRecord",method:"post"},{trainId:this.trainId,direction:this.direction}).then((function(e){uni.hideLoading(),t.trainTimeId=e.data,t.trainBtnStatus=!0,t.showCircleProgress=!0,t.$refs.down.start()})).catch((function(t){uni.hideLoading()}))},forceStopTrain:function(){var t=this;uni.showModal({title:"提示",content:"确定要结束本次训练吗？",success:function(e){e.confirm?t.isTrain?(t.countdownInterval&&clearInterval(t.countdownInterval),t.takePhotoInterval&&clearInterval(t.takePhotoInterval),t.countdownTimeout&&clearTimeout(t.countdownTimeout),t.isTrain=!1,t.trainBtnStatus=!1):(t.$refs.down.reset(),t.showCircleProgress=!1,t.trainBtnStatus=!1):e.cancel}})},switchDevicePosition:function(){this.isTrain?uni.showToast({title:"请等待训练结束",icon:"none"}):"front"==this.devicePosition?this.devicePosition="back":this.devicePosition="front"},countDown:function(){var t=this;this.second=this.trainTime,this.countdownInterval=setInterval((function(){var e=t.second-1;t.second=e}),1e3),this.takePhotoInterval=setInterval((function(){t.trainId&&t.trainTimeId&&t.takePhoto()}),1e3),this.countdownTimeout=setTimeout((function(){clearInterval(t.countdownInterval),clearInterval(t.takePhotoInterval),t.second=0,t.isTrain=!1,t.trainBtnStatus=!1,t.getTrainResult()}),1e3*this.trainTime)},getTrainResult:function(){var t=this;uni.showLoading({title:"获取结果中",mask:!0}),r.default.httpTokenRequest({url:"/wx/patientTrain/trainResult",method:"post"},{trainId:this.trainId,trainTimeId:this.trainTimeId}).then((function(e){uni.hideLoading(),e.data.status;var i=t.selectTrainTimes();i.then((function(i){var n=t.group*t.groupTimes;t.trainTimes===n&&i.other>=n?uni.showModal({title:"提示",showCancel:!1,confirmText:"回到首页",content:"当前动作今日已完成训练",success:function(t){t.confirm?uni.reLaunch({url:"/pages/patient/tabbar"}):t.cancel}}):t.trainTimes===n&&i.other<n&&t.judgeComplete(),t.trainTimes===n||("1"===e.data.status&&(t.callTextToSpeech("请注意保持动作规范"),uni.showToast({title:"请注意保持动作规范",icon:"none"})),setTimeout((function(){t.trainBtnStatus||t.createTrainTimeRecord()}),2e3))}))})).catch((function(t){uni.hideLoading()}))},judgeComplete:function(){var t=this;if(this.trainTimes===this.group*this.groupTimes){var e="left"===this.direction?"当前动作左方向已经完成训练":"当前动作右方向已经完成训练",i="left"===this.direction?"，是否为您切换到右边":"，是否为您切换到左边";this.callTextToSpeech(e+i),uni.showModal({title:"提示",cancelText:"不切换",confirmText:"为我切换",content:e+i,success:function(e){e.confirm?(t.direction="left"===t.direction?"right":"left",t.selectTrainTimes()):e.cancel}})}},startDelayEnd:function(){this.$refs.down.reset(),this.showCircleProgress=!1,this.startTrain()},directionChange:function(t){this.direction=t.detail.value,this.selectTrainTimes();var e="left"===this.direction?"动作已切换到左边":"动作已切换到右边";this.callTextToSpeech(e)},previewImage:function(t){var e=this,i=this.trainFailList.map((function(t){return e.baseUrl+t.failUrl}));uni.previewImage({current:this.baseUrl+t.failUrl,urls:i})},callTextToSpeech:function(t){},backToIndex:function(){uni.showModal({title:"提示",content:"确定要返回首页吗？",success:function(t){t.confirm?uni.reLaunch({url:"/pages/patient/tabbar"}):t.cancel}})}}};e.default=o}}]);